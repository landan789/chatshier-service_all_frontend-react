"use strict";!function(s){var u,n,f=(u={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},n={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},function(e){var i,t,o,a,s;return e.length<3||("y"==(o=e.substr(0,1))&&(e=o.toUpperCase()+e.substr(1)),t=/^(.+?)([^s])s$/,(a=/^(.+?)(ss|i)es$/).test(e)?e=e.replace(a,"$1$2"):t.test(e)&&(e=e.replace(t,"$1$2")),t=/^(.+?)(ed|ing)$/,(a=/^(.+?)eed$/).test(e)?(t=a.exec(e),(a=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(t[1])&&(a=/.$/,e=e.replace(a,""))):t.test(e)&&(i=(t=t.exec(e))[1],(t=/^([^aeiou][^aeiouy]*)?[aeiouy]/).test(i)&&(e=i,s=/([^aeiouylsz])\1$/,i=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,(t=/(at|bl|iz)$/).test(e)?e+="e":s.test(e)?(a=/.$/,e=e.replace(a,"")):i.test(e)&&(e+="e"))),(a=/^(.+?)y$/).test(e)&&(i=(t=a.exec(e))[1],(a=/^([^aeiou][^aeiouy]*)?[aeiouy]/).test(i)&&(e=i+"i")),(a=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/).test(e)&&(i=(t=a.exec(e))[1],t=t[2],(a=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(i)&&(e=i+u[t])),(a=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/).test(e)&&(i=(t=a.exec(e))[1],t=t[2],(a=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(i)&&(e=i+n[t])),t=/^(.+?)(s|t)(ion)$/,(a=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/).test(e)?(i=(t=a.exec(e))[1],(a=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(i)&&(e=i)):t.test(e)&&(i=(t=t.exec(e))[1]+t[2],(t=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(i)&&(e=i)),(a=/^(.+?)e$/).test(e)&&(i=(t=a.exec(e))[1],t=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,s=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,((a=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/).test(i)||t.test(i)&&!s.test(i))&&(e=i)),t=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,(a=/ll$/).test(e)&&t.test(e)&&(a=/.$/,e=e.replace(a,"")),"y"==o&&(e=o.toLowerCase()+e.substr(1))),e}),r=function(r){var l=[],c=Object.create(null);(r=r||{}).languages=r.languages||["chinese","english"],r.stopWordSets=r.stopWordSets||["cjk","english1","english2"],Array.isArray(r.stopWords)||(r.stopWords=[]),r.stopWordSets.forEach(function(e){switch(e){case"cjk":r.stopWords=r.stopWords.concat(["を","です","する","の","れら"]);break;case"english1":r.stopWords=r.stopWords.concat(["i","a","about","an","and","are","as","at","be","been","by","com","for","from","how","in","is","it","not","of","on","or","that","the","this","to","was","what","when","where","which","who","will","with","www","the"]);break;case"english2":r.stopWords=r.stopWords.concat(["we","us","our","ours","they","them","their","he","him","his","she","her","hers","it","its","you","yours","your","has","have","would","could","should","shall","can","may","if","then","else","but","there","these","those"])}}),"boolean"!=typeof r.filterSubstring&&(r.filterSubstring=!0),r.maxiumPhraseLength=r.maxiumPhraseLength||8,r.minimumCount=r.minimumCount||2;var h=function e(i,t){if(!i.length)return[];for(var o=[],a=Math.min(i.length,t);o.push(i.substr(0,a)),--a;);return 1<i.length&&(o=o.concat(e(i.substr(1),t))),o};return{process:function(i){if("string"!=typeof i)throw"You need to supply text for processing.";if(-1!==r.languages.indexOf("english")){var t=Object.create(null),e=i.split(/[^A-Za-zéÉ'’_\-0-9@\.]+/),o=r.stopWords;for(var a in e.forEach(function(e){if((e=e.replace(/\.+/g,".").replace(/(.{3,})\.$/g,"$1").replace(/n[\'’]t\b/gi,"").replace(/[\'’](s|ll|d|ve)?\b/gi,""))&&!(e.length<2)&&!/^[0-9\.@\-]+$/.test(e)&&-1===o.indexOf(e.toLowerCase())){var i=f(e).toLowerCase();i in t||(t[i]={count:0,word:e}),t[i].count++,e.length<t[i].word.length&&(t[i].word=e),e.length===t[i].word.length&&e!==t[i].word&&(t[i].word=e.toLowerCase())}}),t){(n=t[a].word)in c?c[n]+=t[a].count:c[n]=t[a].count}t=void 0}if(-1!==r.languages.indexOf("chinese")){i=i.replace(/[^\u4E00-\u9FFF\u3400-\u4DBF]+/g,"\n"),r.stopWords.forEach(function(e){/^[\u4E00-\u9FFF\u3400-\u4DBF]+$/.test(e)&&(i=i.replace(new RegExp(e,"g"),"$1\n"))});var s=i.split(/\n+/),u=Object.create(null);if(s.forEach(function(e){e.length<=1||h(e,r.maxiumPhraseLength).forEach(function(e){e.length<=1||(e in u||(u[e]=0),u[e]++)})}),r.filterSubstring)for(var n in u){h(n,r.maxiumPhraseLength).forEach(function(e){n!==e&&e in u&&u[e]===u[n]&&delete u[e]})}for(var n in u)n in c||(c[n]=0),c[n]+=u[n];u=void 0}for(var n in l=[],c)c[n]<r.minimumCount||l.push([n,c[n]]);return l=l.sort(function(e,i){return e[1]>i[1]?-1:e[1]<i[1]?1:e[0]===i[0]?0:[e[0],i[0]].sort()[0]!==e[0]?1:-1})},empty:function(){return l=[],c=Object.create(null),!0},getList:function(){return l},getLength:function(){return l.length},getVolume:function(){var i=0;return l.forEach(function(e){i+=e[0].length*Math.pow(e[1],2)}),i},stop:function(){}}};if(r.isSupported=!!(Array.prototype.push&&Array.prototype.indexOf&&Array.prototype.forEach&&Array.isArray&&Object.create),"function"==typeof define&&define.amd)define("wordfreqsync",[],function(){return r});else if("object"==typeof module&&s===module.exports)module.exports=r,require.main===module&&console.error("Error: WordFreqSync is not meant to be executed directly.");else{var l;if(s.WordFreqSync=r,"self"in s&&!("window"in s&&window===s)&&!self.onmessage&&self.postMessage&&self.importScripts)self.onmessage=function(e){var i=e.data,t=i.method,o=i.params;if("init"===t)return l=r.apply(s,o),void self.postMessage(!0);if(!l)throw"You must init to create an instance first";if(!t||!l[t])throw"No such method";var a=l[t].apply(l,o);self.postMessage(a)}}}(this);